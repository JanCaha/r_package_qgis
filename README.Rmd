---
output: md_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# qgis

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
<!-- badges: end -->

**qgis** is automatically generated package which originates from [qgisprocess](https://github.com/paleolimbot/qgisprocess) and aims to provide calls and simple documentation for each [QGIS](https://qgis.org/en/site/) functions available in core and the most important algorithm providers ([GRASS GIS](https://grass.osgeo.org/) and [Saga](http://www.saga-gis.org/)). The algorithms are automatically extracted from fresh install of latest **QGIS** version on **Ubuntu** with packages for **GRASS** and **SAGA** installed.

The package is highly experimental and things are quite likely to change a lot in the future. The definition of individual functions can change if it changes in the QGIS.

## Installation

You can install the released version of **qgis** from GitHub with:

``` r
# install.package("remotes")
remotes::install_github("JanCaha/r_package_qgis")
```

## Personal instalation

If you want to install the package with your personal settings, including algorithms for your installed plugins etc. you can do so by downloading the repository and running following commands from the project.

```{r, eval=FALSE}
# install packages necessary to build the package code
source("./build-package/install_save_deps.R")

# install dependencies for the package
remotes::install_deps(dependencies = TRUE)

# update package description
source("./build-package/update_Description.R")

# build the package code and documentation
# this takes rather long time (roughly 20 minutes for basic QGIS installation)
source("./build-package/build_QGIS_functions.R")

# check and install the package
devtools::check()
devtools::install()
```



## Functions names

The names of the functions follow general pattern of `algorithm-provider_algorithm-id` with only the native **QGIS** algorithms using `qgis` algorithm provider instead of `native`. 

```{r, echo=FALSE}
algs <- readr::read_csv(here::here("data-raw", "algorithms.csv"))
```

The available providers are: `glue::glue_collapse(unique(algorithms$provider), sep = ", ")`. The overall number of available algorithms is `nrow(algs)`.

## Example

The package is not meant to be load directly as this would significant number of functions (<900). Instead the functions should be called as: 

```{r, eval=FALSE}
qgis::qgis_buffer()
```

This allows you to show the help page for the function (at least in **RStudio** using the key shortcut **F1**).

## Example in the wild

This example uses `qgisprocess` pipe ability to directly load output to **R**.

```{r}
library(sf)

fname <- system.file("shape/nc.shp", package="sf")
nc <- st_read(fname)

buffered <- qgis::qgis_buffer(INPUT = nc, 
                              DISTANCE = 0.5, 
                              END_CAP_STYLE = "Flat") %>% 
  st_as_sf()

plot(buffered)
```
